<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="fas-v5.css">
    <title>Document</title>
</head>
<body>

    <div id="fas-grid--container-main">

        <div id="fas-grid--header">
            <a href="https://www.{{shop.domain}}/pages/stores"><p id="fas-header--headline">Find Your Store</p></a>
            <div class="flex-break"></div>
            <div id="fas-header--searchbar">
                <label for=""></label>
                <input id="fas-header--searchbar-input" type="text" placeholder="Search By Zip">
                <div id="fas-header--searchbar-icon"></div>
            </div>

        </div>

        <div id="fas-grid--subheader">
            <div id="fas-subheader--logo"><img src="https://cdn.shopify.com/s/files/1/1921/1117/files/SD_DA_Logo_With_Signet_No_Furn_300_px.svg?v=1675730107" /></div>
            <!-- <p id="fas-subheader--text">With a focus on quality furniture crafted for every budget,
                sister-brands Scandinavian Designs & Dania Furniture offer the same
                assortment of contemporary, rustic industrial and mid-century modern
                furnishings.</p> -->
        </div>

        <div id="fas-grid--data"></div>

    </div>

    <script>
        const gridHeaderContainer = document.getElementById("fas-grid--header")
        const gridSubHeaderContainer = document.getElementById("fas-grid--subheader")
        const gridDataContainer = document.getElementById("fas-grid--data")

        const fakeData = {
            AZ: {
                name: "Arizona",
                stores: {
                    glendale: {
                        AddressOne: "7540 West Bell Road",
                        Brand: "SD",
                        Brand_Name: "Scandinavian Designs",
                        City: "Glendale",
                        Division: "Dupont",
                        Division_Name: "74 - DuPont",
                        Domain: "scandinaviandesigns",
                        Email: "glendale@scandinaviandesigns.com",
                        Handle: "glendale",
                        Latitude: 33.639759,
                        Longitude: -112.221718,
                        Map_Link: "https://www.google.com/maps/place/Scandinavian+Designs/@33.6393987,-112.2230755,17z/data=!4m13!1m7!3m6!1s0x872b683a0b186e1d:0x700a652c06fe876b!2s7540+W+Bell+Rd,+Glendale,+AZ+85308!3b1!8m2!3d33.6399093!4d-112.2217291!3m4!1s0x872b69137d47083b:0x3935b3f77abe708c!8m2!3d33.6397094!4d-112.2217178",
                        Name: "Glendale",
                        PhoneNumber: "(602) 344-9874",
                        State: "AZ",
                        State_Name: "Arizona",
                        States: "AZ",
                        Status: "Active",
                        Store: "22 - Glendale"
                    },
                    mesa: {
                        AddressOne: "7540 West Bell Road",
                        Brand: "SD",
                        Brand_Name: "Scandinavian Designs",
                        City: "Mesa",
                        Division: "Dupont",
                        Division_Name: "74 - DuPont",
                        Domain: "scandinaviandesigns",
                        Email: "glendale@scandinaviandesigns.com",
                        Handle: "mesa",
                        Latitude: 33.639759,
                        Longitude: -112.221718,
                        Map_Link: "https://www.google.com/maps/place/Scandinavian+Designs/@33.6393987,-112.2230755,17z/data=!4m13!1m7!3m6!1s0x872b683a0b186e1d:0x700a652c06fe876b!2s7540+W+Bell+Rd,+Glendale,+AZ+85308!3b1!8m2!3d33.6399093!4d-112.2217291!3m4!1s0x872b69137d47083b:0x3935b3f77abe708c!8m2!3d33.6397094!4d-112.2217178",
                        Name: "Mesa",
                        PhoneNumber: "(602) 344-9874",
                        State: "AZ",
                        State_Name: "Arizona",
                        States: "AZ",
                        Status: "Active",
                        Store: "22 - Glendale"
                    },
                    phoenix: {
                        AddressOne: "7540 West Bell Road",
                        Brand: "SD",
                        Brand_Name: "Scandinavian Designs",
                        City: "Phoenix",
                        Division: "Dupont",
                        Division_Name: "74 - DuPont",
                        Domain: "scandinaviandesigns",
                        Email: "glendale@scandinaviandesigns.com",
                        Handle: "phoenix",
                        Latitude: 33.639759,
                        Longitude: -112.221718,
                        Map_Link: "https://www.google.com/maps/place/Scandinavian+Designs/@33.6393987,-112.2230755,17z/data=!4m13!1m7!3m6!1s0x872b683a0b186e1d:0x700a652c06fe876b!2s7540+W+Bell+Rd,+Glendale,+AZ+85308!3b1!8m2!3d33.6399093!4d-112.2217291!3m4!1s0x872b69137d47083b:0x3935b3f77abe708c!8m2!3d33.6397094!4d-112.2217178",
                        Name: "Phoenix",
                        PhoneNumber: "(602) 344-9874",
                        State: "AZ",
                        State_Name: "Arizona",
                        States: "AZ",
                        Status: "Active",
                        Store: "22 - Glendale"
                    }
                }
            },
            MI: {
                name: "Michigan",
                stores: {
                    qwerty: {
                        AddressOne: "7540 West Bell Road",
                        Brand: "SD",
                        Brand_Name: "Scandinavian Designs",
                        City: "Glendale",
                        Division: "Dupont",
                        Division_Name: "74 - DuPont",
                        Domain: "scandinaviandesigns",
                        Email: "glendale@scandinaviandesigns.com",
                        Handle: "glendale",
                        Latitude: 33.639759,
                        Longitude: -112.221718,
                        Map_Link: "https://www.google.com/maps/place/Scandinavian+Designs/@33.6393987,-112.2230755,17z/data=!4m13!1m7!3m6!1s0x872b683a0b186e1d:0x700a652c06fe876b!2s7540+W+Bell+Rd,+Glendale,+AZ+85308!3b1!8m2!3d33.6399093!4d-112.2217291!3m4!1s0x872b69137d47083b:0x3935b3f77abe708c!8m2!3d33.6397094!4d-112.2217178",
                        Name: "Glendale",
                        PhoneNumber: "(602) 344-9874",
                        State: "AZ",
                        State_Name: "Arizona",
                        States: "AZ",
                        Status: "Active",
                        Store: "22 - Glendale"
                    },
                    dddddd: {
                        AddressOne: "7540 West Bell Road",
                        Brand: "SD",
                        Brand_Name: "Scandinavian Designs",
                        City: "Mesa",
                        Division: "Dupont",
                        Division_Name: "74 - DuPont",
                        Domain: "scandinaviandesigns",
                        Email: "glendale@scandinaviandesigns.com",
                        Handle: "mesa",
                        Latitude: 33.639759,
                        Longitude: -112.221718,
                        Map_Link: "https://www.google.com/maps/place/Scandinavian+Designs/@33.6393987,-112.2230755,17z/data=!4m13!1m7!3m6!1s0x872b683a0b186e1d:0x700a652c06fe876b!2s7540+W+Bell+Rd,+Glendale,+AZ+85308!3b1!8m2!3d33.6399093!4d-112.2217291!3m4!1s0x872b69137d47083b:0x3935b3f77abe708c!8m2!3d33.6397094!4d-112.2217178",
                        Name: "Mesa",
                        PhoneNumber: "(602) 344-9874",
                        State: "AZ",
                        State_Name: "Arizona",
                        States: "AZ",
                        Status: "Active",
                        Store: "22 - Glendale"
                    },
                    asdf: {
                        AddressOne: "7540 West Bell Road",
                        Brand: "SD",
                        Brand_Name: "Scandinavian Designs",
                        City: "Phoenix",
                        Division: "Dupont",
                        Division_Name: "74 - DuPont",
                        Domain: "scandinaviandesigns",
                        Email: "glendale@scandinaviandesigns.com",
                        Handle: "phoenix",
                        Latitude: 33.639759,
                        Longitude: -112.221718,
                        Map_Link: "https://www.google.com/maps/place/Scandinavian+Designs/@33.6393987,-112.2230755,17z/data=!4m13!1m7!3m6!1s0x872b683a0b186e1d:0x700a652c06fe876b!2s7540+W+Bell+Rd,+Glendale,+AZ+85308!3b1!8m2!3d33.6399093!4d-112.2217291!3m4!1s0x872b69137d47083b:0x3935b3f77abe708c!8m2!3d33.6397094!4d-112.2217178",
                        Name: "Phoenix",
                        PhoneNumber: "(602) 344-9874",
                        State: "AZ",
                        State_Name: "Arizona",
                        States: "AZ",
                        Status: "Active",
                        Store: "22 - Glendale"
                    }
                }
            },
            LO: {
                name: "Made Up State",
                stores: {
                    zabba: {
                        AddressOne: "7540 West Bell Road",
                        Brand: "SD",
                        Brand_Name: "Scandinavian Designs",
                        City: "Glendale",
                        Division: "Dupont",
                        Division_Name: "74 - DuPont",
                        Domain: "scandinaviandesigns",
                        Email: "glendale@scandinaviandesigns.com",
                        Handle: "glendale",
                        Latitude: 33.639759,
                        Longitude: -112.221718,
                        Map_Link: "https://www.google.com/maps/place/Scandinavian+Designs/@33.6393987,-112.2230755,17z/data=!4m13!1m7!3m6!1s0x872b683a0b186e1d:0x700a652c06fe876b!2s7540+W+Bell+Rd,+Glendale,+AZ+85308!3b1!8m2!3d33.6399093!4d-112.2217291!3m4!1s0x872b69137d47083b:0x3935b3f77abe708c!8m2!3d33.6397094!4d-112.2217178",
                        Name: "Glendale",
                        PhoneNumber: "(602) 344-9874",
                        State: "AZ",
                        State_Name: "Arizona",
                        States: "AZ",
                        Status: "Active",
                        Store: "22 - Glendale"
                    },
                    abba: {
                        AddressOne: "7540 West Bell Road",
                        Brand: "SD",
                        Brand_Name: "Scandinavian Designs",
                        City: "Mesa",
                        Division: "Dupont",
                        Division_Name: "74 - DuPont",
                        Domain: "scandinaviandesigns",
                        Email: "glendale@scandinaviandesigns.com",
                        Handle: "mesa",
                        Latitude: 33.639759,
                        Longitude: -112.221718,
                        Map_Link: "https://www.google.com/maps/place/Scandinavian+Designs/@33.6393987,-112.2230755,17z/data=!4m13!1m7!3m6!1s0x872b683a0b186e1d:0x700a652c06fe876b!2s7540+W+Bell+Rd,+Glendale,+AZ+85308!3b1!8m2!3d33.6399093!4d-112.2217291!3m4!1s0x872b69137d47083b:0x3935b3f77abe708c!8m2!3d33.6397094!4d-112.2217178",
                        Name: "Mesa",
                        PhoneNumber: "(602) 344-9874",
                        State: "AZ",
                        State_Name: "Arizona",
                        States: "AZ",
                        Status: "Active",
                        Store: "22 - Glendale"
                    },
                    meh: {
                        AddressOne: "7540 West Bell Road",
                        Brand: "SD",
                        Brand_Name: "Scandinavian Designs",
                        City: "Phoenix",
                        Division: "Dupont",
                        Division_Name: "74 - DuPont",
                        Domain: "scandinaviandesigns",
                        Email: "glendale@scandinaviandesigns.com",
                        Handle: "phoenix",
                        Latitude: 33.639759,
                        Longitude: -112.221718,
                        Map_Link: "https://www.google.com/maps/place/Scandinavian+Designs/@33.6393987,-112.2230755,17z/data=!4m13!1m7!3m6!1s0x872b683a0b186e1d:0x700a652c06fe876b!2s7540+W+Bell+Rd,+Glendale,+AZ+85308!3b1!8m2!3d33.6399093!4d-112.2217291!3m4!1s0x872b69137d47083b:0x3935b3f77abe708c!8m2!3d33.6397094!4d-112.2217178",
                        Name: "Phoenix",
                        PhoneNumber: "(602) 344-9874",
                        State: "AZ",
                        State_Name: "Arizona",
                        States: "AZ",
                        Status: "Active",
                        Store: "22 - Glendale"
                    }
                }
            }
	    }

        function buildStateInterface(data) {
            for(const stateCode in data) {
                const state = data[stateCode];
                const stateDiv = document.createElement('div')
                const stateContainerMarkup = `
                    <div id="state-container-${stateCode}" class="state-container" state="${stateCode}">
                        <h2 class="state-header">${state.name}</h2>
                        <div class="break"></div>
                    </div>`

                stateDiv.innerHTML = stateContainerMarkup;
                gridDataContainer.append(stateDiv)
                console.log('built state box')
                const storeList = state.stores;
                var storeHandles = Object.keys(storeList);
                storeHandles.sort();
                
                for(const storeHandle of storeHandles) {
                    const store = storeList[storeHandle];
                    const storeCardProfile = document.createElement('div')

                    storeCardProfile.classList.add('card-store-profile', 'fas-item')
                    storeCardProfile.setAttribute("handle", store.Handle);
                        
                    storeCardProfile.innerHTML = assembleStoreCardHtml(store);
                    
                    document.querySelector(`#state-container-${stateCode}`).append(storeCardProfile)
                    console.log('built store card')
                }
            }
        
            //	Build the custom search page
            //	Note that no store cards are built - they will be built and removed upon each search
            const stateDiv = document.createElement('div')
            const stateContainerMarkup = `
                <div id="state-container-search" class="state-container" state="search">
                    <h2 id="search-container-header" class="state-header"></h2>
                    <div class="break"></div>
                </div>`
            
            stateDiv.classList.add('center-hotfix')
            stateDiv.innerHTML = stateContainerMarkup;
            gridDataContainer.append(stateDiv)
                     
            // if(stateQueryParam && data.hasOwnProperty(stateQueryParam)){
            // //	If state is present in URL and API response, set it as the current state
            //     activeStateContainer = document.querySelector(`#state-container-${stateQueryParam}`);
            //     activeState = document.querySelector(`#${stateQueryParam}`);
            //     activeState.classList.add("state-selected");

            //     if(!(data[stateQueryParam].stores.hasOwnProperty(storeQueryParam))) {
            //         revealStores();
            //     }
            // }
        }

        function assembleStoreCardHtml (store, storeDistance) {	
            let storeDistanceHtml = "";
            const phone = `<p class="store-phone" phoneLink="tel:${store.PhoneNumber}">${store.PhoneNumber}</p>`;

            if(storeDistance != null) storeDistanceHtml = `<p><i>Approx</i>. <b>${storeDistance}</b> miles away</p>`;
            if(store["Closed Reason"] != null) phone = `<p> ${store["Closed Reason"]} </p>`;

            const storeCardMarkup = `
                <div class="fas-store-card">
                    <div class="fas-store-card-textcontainer">
                        <div class="fas-store-card-title">
                            <p class="store-title">${store.Name}</p>
                        </div>
                        <div class="fas-store-card-address">
                            ${storeDistanceHtml}
                            <p class="store-address">
                                ${store.AddressOne}
                            </p>
                            <p class="store-address2">
                                ${store.City}, ${store.State} ${store.Zip}
                            </p>
                        </div>
                        <div class="fas-store-card-phone">
                            ${phone}
                        </div>
                    </div>
                </div>`
            
            return storeCardMarkup;
        }

        buildStateInterface(fakeData)
    </script>
    
</body>
</html>